---
layout: post
title: "分布式事务，也谈"
date: 2016-09-19 17:16:43 +0800
comments: true
categories: ["架构"]
published: true

---

近来有挺多文章谈“分布式事务”。
这些文章主要是从实现模式角度来谈的。比如常见的模式有哪些，哪些个模式适合哪种场景，有什么优点缺点，根据什么选择等等。比如附图的这个红绿灯图[^1]，是其中的优秀代表。很有指导作用。

这个“也谈”不重复这些，从其他角度谈一些认识：

<!--more-->



1. 分布式事务本质上是对一个过程进行管理。
2. 这个过程由一些操作构成，特别是由一些容易出问题的操作构成。
3. 业务操作的特性是管理者需要重点考虑的：结果可知？可否重试？结果外界可见？
4. 管理者需要做一个决策。

常见的所有实现模式，都是对上述要点的实现。
我们看一下常见的模式是如何实现这个过程管理的  -

1. Saga - 最为一般的模型
2. 补偿 - 简化的模型，一般用于处理顺序执行的操作，一旦某个操作失败，补偿已经成功的操作。
4. TCC - 可以做到在事务过程中外界对操作不可见，也就是做到“隔离性”，这个特性的代价是把一个操作人为地分为两个。
5. 可靠事件
6. 两段三段 - 




{% img  /images/transaction/transaction.jpg 500 %}

[^1]: 原文：[分布式事务：不过是在一致性、吞吐量和复杂度之间，做一个选择](http://www.open-open.com/lib/view/open1473404638516.html)