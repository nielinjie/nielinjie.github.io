---
layout: page
title: Blog Archive
footer: false
---

<div id="blog-filtered">

</div>
<script type="text/javascript" charset="utf-8">
  function filter(){
    window.filter={
      name:getParameterByName("filterName"),
      value:getParameterByName("filterValue"),
      des:getParameterByName("filterDes")
    }
    if(window.filter.name=="category"){
      return _(window.site.posts).filter(function(p){
        return _(p.categories).contains(window.filter.value)
      })
    }
    if(window.filter.name=="series"){
      return _(window.site.posts).filter(function(p){
        return _(p.series).any(function(s){
          return s.split(" ")[0]==window.filter.value
        })
      })
    }
    if(window.filter.name=="week"){
      return _(window.site.posts).filter(function(p){
        var time= new Date(p.date).getTime()
        var start=new Date(window.filter.value).getTime()
        var end = new Date(start+1000*60*60*24*7)
        return time<end && time>start
      })
    }
  }
  function article(post){
    var art=$("<article/>")
    art.append($("<h1/>").append($("<a/>").attr("href",post.url).text(post.title)))
    return art
  }
  function update(){
    $("#blog-filtered").empty()
    var posts=filter()
    _(posts).each(function(p){
      $("#blog-filtered").append(article(p))
    })
    $("h1.entry-title").text(window.filter.des)
  }
  update()
</script>
